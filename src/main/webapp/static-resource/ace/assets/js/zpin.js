/**
 * Created by johnzheng on 18/06/2017.
 */
!function(t){"use strict";t.Zebra_Pin=function(s,n){var i={class_name:"Zebra_Pin",contain:!1,hard:!1,top_spacing:0,bottom_spacing:0,z_index:99,onPin:null,onUnpin:null},o=this,e=(Math.random()+1).toString(36).substring(2,7),a=t(window);o.settings={};o.update=function(){s.each(function(s){void 0===t(this).data("Zebra_Pin_Position")?t(this).data("Zebra_Pin_Position",t(this).css("position")):t(this).css("position",t(this).data("Zebra_Pin_Position"));var n,i,p,g,c=t(this),l=c.offset(),_=c.position(),f=c.outerHeight(),r=parseInt(c.css("marginLeft"),10)||0,d=parseInt(c.css("marginTop"),10)||0;l.left-=r,l.top-=d,o.settings.contain&&(n=c.parent(),i=n.height(),p=n.offset()),o.settings.hard?c.css({position:"fixed",left:l.left,top:l.top,zIndex:o.settings.z_index}).addClass(o.settings.class_name):(c.css({zIndex:o.settings.z_index}).removeClass(o.settings.class_name),g=".Zebra_Pin_"+e+"_"+s,a.off("scroll"+g).on("scroll"+g,function(){var t=a.scrollTop();t>=l.top-o.settings.top_spacing&&(!o.settings.contain||t<=p.top+i-o.settings.top_spacing-f-o.settings.bottom_spacing)&&"fixed"!==c.css("position")?(c.css({position:"fixed",left:l.left,top:o.settings.top_spacing}).addClass(o.settings.class_name),o.settings.onPin&&"function"==typeof o.settings.onPin&&o.settings.onPin(l.top-o.settings.top_spacing,c,s)):t<l.top-o.settings.top_spacing&&"absolute"!==c.css("position")?(c.css({position:"absolute",left:_.left,top:_.top}).removeClass(o.settings.class_name),o.settings.onUnpin&&"function"==typeof o.settings.onUnpin&&o.settings.onUnpin(l.top-o.settings.top_spacing,c,s)):o.settings.contain&&t>=p.top+i-o.settings.top_spacing-f-o.settings.bottom_spacing&&"absolute"!==c.css("position")&&(c.css({position:"absolute",left:_.left,top:i-f-o.settings.bottom_spacing-o.settings.bottom_spacing}).removeClass(o.settings.class_name),o.settings.onUnpin&&"function"==typeof o.settings.onUnpin&&o.settings.onUnpin(p.top+i-f-o.settings.bottom_spacing,c,s))}),a.trigger("scroll"+g))})},function(){o.settings=t.extend({},i,n),o.update(),a.on("resize",function(){o.update()})}()}}(jQuery);